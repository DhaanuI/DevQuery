<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ask Question</title>
    <link rel="stylesheet" href="./style/ask.css">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>
    <div id="ask">
        <h1>Ask a public question</h1>
        <form action="">
            <div class="heading">
                <h3>Title</h3>
                <p>Be specific and imagine youâ€™re asking a question to another person.</p>
                <input type="text" name="heading" id="heading" placeholder="e.g. Is there an R function for finding the index of an element in a vector?" required>
                <div id="question_body">
                    <h3>What are the details of your problem?</h3>
                    <p>Introduce the problem and expand on what you put in the title. Minimum 20 characters.</p>
                    <div id="editor-container">
                    </div>
                </div>
                <button id="submit">Submit</button>
            </div>
        </form>
    </div>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="./script/ask.js"></script>
    <script>
        var quill = new Quill('#editor-container', {
  modules: {
    toolbar: [
      [{ header: [1, 2,3, 4, 5, 6, false] }],
      ['bold', 'italic', 'underline'],
      ['code-block'],
      [{ 'list': 'ordered'}, { 'list': 'bullet' }]
    ]
  },
  placeholder: 'Explain Question in details...',
  theme: 'snow'
});
document.querySelector("form").addEventListener("submit", async (e)=>{
    e.preventDefault()
    let heading = document.getElementById("heading").value;
    let discreption = quill.root.innerHTML;
    let qObj = {
        heading,
        discreption
    }
    let token = localStorage.getItem("token")
    try {
        let post_question = await fetch("http://localhost:8000/questions/addquestion", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "authorization": token
                },
                body: JSON.stringify({question: qObj})
            })
            const res = await post_question.json()
            if(res._id){
                localStorage.setItem("question_id", res._id)
            }
    } catch (error) {
        console.log(error)
    }
})
    </script>
</body>
</html>